(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-89167c30"],{"14bf":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{staticClass:"crud-box list-notifications",attrs:{tile:"",elevation:0}},[i("h1",{staticClass:"mx-4"},[t._v("Notifications")]),i("v-layout",{staticClass:"px-4 pt-4",attrs:{wrap:""}},[i("div",{staticStyle:{overflow:"visible"}}),i("v-spacer"),i("v-layout",{staticStyle:{"max-width":"255px"},attrs:{wrap:""}},[i("v-text-field",{staticClass:"mr-2",attrs:{dense:"",outlined:"",label:"Search Message"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.doSearch.apply(null,arguments)}},model:{value:t.searchFields.data.value,callback:function(e){t.$set(t.searchFields.data,"value",e)},expression:"searchFields.data.value"}})],1),i("v-btn",{attrs:{color:"primary"},on:{click:t.doSearch}},[i("v-icon",[t._v("mdi-magnify")]),t._v(" Search ")],1)],1),i("v-card",{staticClass:"block-tbl mx-4",attrs:{tile:"",elevation:1,disabled:t.tblLoading,outlined:""}},[i("v-data-table",{attrs:{headers:t.tblHeader,items:t.listItems,"server-items-length":t.tblPagination.total,loading:t.tblLoading,options:t.tblOptions,"single-expand":"",expanded:t.expanded,"loading-text":t.tblConfig.text.loading,"show-select":t.tblConfig.showSelect},on:{"click:row":t.onClickRow,"update:options":function(e){t.tblOptions=e},"update:expanded":function(e){t.expanded=e}},scopedSlots:t._u([{key:"no-data",fn:function(){return[t._v(" "+t._s(t.tblConfig.text.noItem)+" ")]},proxy:!0},{key:"item.message",fn:function(e){var n=e.item;return[i("div",{staticClass:"notification-message",class:{"message-unread":"unread"===n.status}},[t._v(t._s(n.message))])]}},{key:"item.created_time",fn:function(e){var n=e.item;return[i("div",{staticClass:"text-date"},[t._v(t._s(n.created_time.split("T")[0]))]),i("div",{staticClass:"text-time"},[t._v(t._s(n.created_time.split("T")[1]))])]}},{key:"expanded-item",fn:function(e){var n=e.headers,a=e.item;return[i("td",{attrs:{colspan:n.length}},[t._v(" "+t._s(a)+" ")])]}}]),model:{value:t.pickedItems,callback:function(e){t.pickedItems=e},expression:"pickedItems"}})],1),i("v-dialog",{attrs:{width:"60%"},model:{value:t.dialog.detail,callback:function(e){t.$set(t.dialog,"detail",e)},expression:"dialog.detail"}},[i("DetailItem",{attrs:{selectedItem:t.selectedItem,onClose:function(){t.dialog.detail=!1}}})],1),i("v-dialog",{attrs:{width:400},model:{value:t.dialog.delete,callback:function(e){t.$set(t.dialog,"delete",e)},expression:"dialog.delete"}},[i("DeleteItem",{attrs:{idsToDelete:t.idsToDelete,onDeleted:t.onDeleted,onCancel:function(){t.dialog.delete=!1}}})],1)],1)},a=[],o=i("c7eb"),s=i("1da1"),c=i("5530"),l=i("2f62"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{staticClass:"mx-auto pa-5"},[i("v-card-title",{staticClass:"mx-0 px-0"},[t._v("Detail Notification")]),i("v-row",[i("v-col",{attrs:{cols:"6"}},[i("v-card-text",[t._v("Name: "+t._s(t.item.name))])],1),i("v-col",{attrs:{cols:"6"}},[i("v-card-text",[t._v("Group: "+t._s(t.item.group))])],1),i("v-col",{attrs:{cols:"6"}},[i("v-card-text",[t._v("Title: "+t._s(t.item.title))])],1)],1),i("v-card-actions",{staticClass:"mx-0 pa-0"},[i("v-spacer"),i("v-btn",{attrs:{color:"primary",text:""},on:{click:t.onClose}},[t._v("Close")])],1)],1)},d=[],u={name:"DetailNotification",props:["selectedItem","onClose"],data:function(){return{item:{}}},mounted:function(){this.item=Object(c["a"])({},this.selectedItem)}},h=u,f=i("2877"),m=i("6544"),p=i.n(m),v=i("8336"),g=i("b0af"),b=i("99d9"),w=i("62ad"),x=i("0fd9"),y=i("2fa4"),k=Object(f["a"])(h,r,d,!1,null,null,null),C=k.exports;p()(k,{VBtn:v["a"],VCard:g["a"],VCardActions:b["a"],VCardText:b["c"],VCardTitle:b["d"],VCol:w["a"],VRow:x["a"],VSpacer:y["a"]});var O=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",[i("v-card-title",[t._v("Do you want to delete "+t._s(t.idsToDelete.length>1?"these":"this")+" notification?")]),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"secondary",text:""},on:{click:t.onCancel}},[t._v("Cancel")]),i("v-btn",{attrs:{color:"primary",text:""},on:{click:t.processDelete}},[t._v("OK")])],1)],1)},_=[],I={name:"DeleteNotification",props:["idsToDelete","onDeleted","onCancel"],methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])({deleteItem:"notification/delete"})),{},{processDelete:function(){var t=this;return Object(s["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.idsToDelete){e.next=2;break}return e.abrupt("return",t.noticeWarning("Item not found"));case 2:t.deleteItem(t.idsToDelete).then((function(){t.onDeleted()}));case 3:case"end":return e.stop()}}),e)})))()}})},S=I,A=Object(f["a"])(S,O,_,!1,null,null,null),D=A.exports;p()(A,{VBtn:v["a"],VCard:g["a"],VCardActions:b["a"],VCardTitle:b["d"],VSpacer:y["a"]});i("d81d"),i("a15b"),i("fb6a"),i("ac1f"),i("5319"),i("d3b7");var T=i("21a6"),j=i.n(T),E={data:function(){return{pickedItems:[],selectedItem:null,idsToDelete:[],tblLoading:!1,expanded:[],dialog:{create:!1,detail:!1,update:!1,delete:!1,import:!1},querySilent:!0,tblConfig:{footerProps:{showFirstLastPage:!0,"items-per-page-options":[10,20,50,100,-1]},showSelect:!1,text:{loading:"Loading ...",noItem:"No item found"}},tblOptions:{sortBy:["created_at"],sortDesc:[!0]}}},computed:{listItems:function(){return this.items.map((function(t){return t.message=t.data.join("\n"),t.created_time=new Date(t.created_at).toISOString().slice(0,19),t.status=t.read_at?"":"unread",t}))},getIndexOfItem:function(){var t=this;return function(e){var i=t.tblPagination?(t.tblPagination.current_page-1)*t.tblPagination.per_page:0;return i+t.items.indexOf(e)+1}},queryConf:function(){return{options:this.tblOptions,searchWith:this.searchWith,querySilent:this.querySilent}}},methods:{onClickNew:function(){this.dialog.create=!0},onClickImport:function(){this.dialog.import=!0},onClickExport:function(){this.exportListItems(Object(c["a"])(Object(c["a"])({},this.queryConf),{},{querySilent:!1,searchFields:this.searchFields})).then((function(t){var e=t.headers&&t.headers["content-disposition"]?t.headers["content-disposition"].replace("attachment; filename=",""):null;e?j.a.saveAs(t.data,e):j.a.saveAs(t.data)})).catch((function(t){console.log(t.message)}))},onClickDelete:function(t){this.dialog.delete=!0,this.idsToDelete=[t.item.id]},onClickEdit:function(t){this.selectedItem=t.item,this.dialog.update=!0},onClickDetail:function(t){this.selectedItem=t.item,this.dialog.detail=!0},onClickDeleteAll:function(){this.dialog.delete=!0,this.idsToDelete=this.pickedItems.map((function(t){return t.id}))},onCreated:function(){this.dialog.create=!1,this.doSearch()},onUpdated:function(){this.dialog.update=!1,this.doSearch()},onDeleted:function(){this.dialog.delete=!1,this.idsToDelete=[],this.doSearch()},onImported:function(){this.dialog.import=!1,this.doSearch()},doSearch:function(){var t=this;this.pickedItems=[],this.selectedItem=null,this.tblLoading=!0,this.getListItems(Object(c["a"])(Object(c["a"])({},this.queryConf),{},{searchFields:this.searchFields})).then((function(e){t.tblOptions.page>e.data.last_page&&(t.tblOptions.page=e.data.last_page)})).finally((function(){t.tblLoading=!1}))}},watch:{queryConf:{handler:function(){this.doSearch()},deep:!0}}},L={name:"ManageNotifications",components:{DetailItem:C,DeleteItem:D},mixins:[E],data:function(){return{searchFields:{data:{value:"",type:"like"}},searchWith:"",tblHeader:[{text:"Time",value:"created_time",width:"111px",sortable:!1},{text:"Message",value:"message",sortable:!1},{text:"Status",value:"status",width:"99px",sortable:!1}]}},computed:Object(c["a"])({},Object(l["c"])({items:"notification/all",tblPagination:"notification/pagination"})),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])({getListItems:"notification/get",getListUnread:"notification/getUnread",markAsRead:"notification/markAsRead",exportListItems:"notification/export"})),{},{onClickRow:function(t,e){var i=this;return Object(s["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i.expanded=[e.item],!e.item.read_at){t.next=3;break}return t.abrupt("return");case 3:i.markAsRead([e.item.id]);case 4:case"end":return t.stop()}}),t)})))()}})},$=L,B=(i("eee9"),i("8fea")),V=i("169a"),R=i("132d"),F=i("a722"),M=i("8654"),U=Object(f["a"])($,n,a,!1,null,"7bc0ca54",null);e["default"]=U.exports;p()(U,{VBtn:v["a"],VCard:g["a"],VDataTable:B["a"],VDialog:V["a"],VIcon:R["a"],VLayout:F["a"],VSpacer:y["a"],VTextField:M["a"]})},"169a":function(t,e,i){"use strict";i("368e");var n=i("480e"),a=i("4ad4"),o=i("b848"),s=i("75eb"),c=i("e707"),l=i("e4d3"),r=i("21be"),d=i("a293"),u=i("58df"),h=i("d9bd"),f=i("80d2");const m=Object(u["a"])(o["a"],s["a"],c["a"],l["a"],r["a"],a["a"]);e["a"]=m.extend({name:"v-dialog",directives:{ClickOutside:d["a"]},props:{dark:Boolean,disabled:Boolean,fullscreen:Boolean,light:Boolean,maxWidth:[String,Number],noClickAnimation:Boolean,origin:{type:String,default:"center center"},persistent:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,transition:{type:[String,Boolean],default:"dialog-transition"},width:[String,Number]},data(){return{activatedBy:null,animate:!1,animateTimeout:-1,stackMinZIndex:200,previousActiveElement:null}},computed:{classes(){return{[("v-dialog "+this.contentClass).trim()]:!0,"v-dialog--active":this.isActive,"v-dialog--persistent":this.persistent,"v-dialog--fullscreen":this.fullscreen,"v-dialog--scrollable":this.scrollable,"v-dialog--animated":this.animate}},contentClasses(){return{"v-dialog__content":!0,"v-dialog__content--active":this.isActive}},hasActivator(){return Boolean(!!this.$slots.activator||!!this.$scopedSlots.activator)}},watch:{isActive(t){var e;t?(this.show(),this.hideScroll()):(this.removeOverlay(),this.unbind(),null==(e=this.previousActiveElement)||e.focus())},fullscreen(t){this.isActive&&(t?(this.hideScroll(),this.removeOverlay(!1)):(this.showScroll(),this.genOverlay()))}},created(){this.$attrs.hasOwnProperty("full-width")&&Object(h["e"])("full-width",this)},beforeMount(){this.$nextTick(()=>{this.isBooted=this.isActive,this.isActive&&this.show()})},beforeDestroy(){"undefined"!==typeof window&&this.unbind()},methods:{animateClick(){this.animate=!1,this.$nextTick(()=>{this.animate=!0,window.clearTimeout(this.animateTimeout),this.animateTimeout=window.setTimeout(()=>this.animate=!1,150)})},closeConditional(t){const e=t.target;return!(this._isDestroyed||!this.isActive||this.$refs.content.contains(e)||this.overlay&&e&&!this.overlay.$el.contains(e))&&this.activeZIndex>=this.getMaxZIndex()},hideScroll(){this.fullscreen?document.documentElement.classList.add("overflow-y-hidden"):c["a"].options.methods.hideScroll.call(this)},show(){!this.fullscreen&&!this.hideOverlay&&this.genOverlay(),this.$nextTick(()=>{this.$nextTick(()=>{this.$refs.content.contains(document.activeElement)||(this.previousActiveElement=document.activeElement,this.$refs.content.focus()),this.bind()})})},bind(){window.addEventListener("focusin",this.onFocusin)},unbind(){window.removeEventListener("focusin",this.onFocusin)},onClickOutside(t){this.$emit("click:outside",t),this.persistent?this.noClickAnimation||this.animateClick():this.isActive=!1},onKeydown(t){if(t.keyCode===f["y"].esc&&!this.getOpenDependents().length)if(this.persistent)this.noClickAnimation||this.animateClick();else{this.isActive=!1;const t=this.getActivator();this.$nextTick(()=>t&&t.focus())}this.$emit("keydown",t)},onFocusin(t){if(!t||!this.retainFocus)return;const e=t.target;if(e&&![document,this.$refs.content].includes(e)&&!this.$refs.content.contains(e)&&this.activeZIndex>=this.getMaxZIndex()&&!this.getOpenDependentElements().some(t=>t.contains(e))){const t=this.$refs.content.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),e=[...t].find(t=>!t.hasAttribute("disabled"));e&&e.focus()}},genContent(){return this.showLazyContent(()=>[this.$createElement(n["a"],{props:{root:!0,light:this.light,dark:this.dark}},[this.$createElement("div",{class:this.contentClasses,attrs:{role:"dialog",tabindex:this.isActive?0:void 0,"aria-modal":this.hideOverlay?void 0:"true",...this.getScopeIdAttrs()},on:{keydown:this.onKeydown},style:{zIndex:this.activeZIndex},ref:"content"},[this.genTransition()])])])},genTransition(){const t=this.genInnerContent();return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,appear:!0}},[t]):t},genInnerContent(){const t={class:this.classes,ref:"dialog",directives:[{name:"click-outside",value:{handler:this.onClickOutside,closeConditional:this.closeConditional,include:this.getOpenDependentElements}},{name:"show",value:this.isActive}],style:{transformOrigin:this.origin}};return this.fullscreen||(t.style={...t.style,maxWidth:Object(f["h"])(this.maxWidth),width:Object(f["h"])(this.width)}),this.$createElement("div",t,this.getContentSlot())}},render(t){return t("div",{staticClass:"v-dialog__container",class:{"v-dialog__container--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},[this.genActivator(),this.genContent()])}})},"21a6":function(t,e,i){(function(i){var n,a,o;(function(i,s){a=[],n=s,o="function"===typeof n?n.apply(e,a):n,void 0===o||(t.exports=o)})(0,(function(){"use strict";function e(t,e){return"undefined"==typeof e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}function n(t,e,i){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){l(n.response,e,i)},n.onerror=function(){console.error("could not download file")},n.send()}function a(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function o(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var s="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof i&&i.global===i?i:void 0,c=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=s.saveAs||("object"!=typeof window||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!c?function(t,e,i){var c=s.URL||s.webkitURL,l=document.createElement("a");e=e||t.name||"download",l.download=e,l.rel="noopener","string"==typeof t?(l.href=t,l.origin===location.origin?o(l):a(l.href)?n(t,e,i):o(l,l.target="_blank")):(l.href=c.createObjectURL(t),setTimeout((function(){c.revokeObjectURL(l.href)}),4e4),setTimeout((function(){o(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,i,s){if(i=i||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(e(t,s),i);else if(a(t))n(t,i,s);else{var c=document.createElement("a");c.href=t,c.target="_blank",setTimeout((function(){o(c)}))}}:function(t,e,i,a){if(a=a||open("","_blank"),a&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof t)return n(t,e,i);var o="application/octet-stream"===t.type,l=/constructor/i.test(s.HTMLElement)||s.safari,r=/CriOS\/[\d]+/.test(navigator.userAgent);if((r||o&&l||c)&&"undefined"!=typeof FileReader){var d=new FileReader;d.onloadend=function(){var t=d.result;t=r?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=t:location=t,a=null},d.readAsDataURL(t)}else{var u=s.URL||s.webkitURL,h=u.createObjectURL(t);a?a.location=h:location.href=h,a=null,setTimeout((function(){u.revokeObjectURL(h)}),4e4)}});s.saveAs=l.saveAs=l,t.exports=l}))}).call(this,i("c8ba"))},"368e":function(t,e,i){},a722:function(t,e,i){"use strict";i("20f6");var n=i("e8f2");e["a"]=Object(n["a"])("layout")},b301:function(t,e,i){},eee9:function(t,e,i){"use strict";i("b301")}}]);
//# sourceMappingURL=chunk-89167c30.c4c81b6d.js.map